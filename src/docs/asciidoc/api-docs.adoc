ifndef::snippets[]
:snippets: ./build/generated-snippets
endif::[]

:member: member-controller-test
:position: position-controller-test
:vacation: vacation-controller-test
:duty: duty-controller-test

= REST API
:toc: left
:toclevels: 2
:source-highlighter: highlightjs


```

 명세서를 통해 못 알아보거나 혹은 수정이 필요하다면 담당자에게 연락주세요

= 김우람 - 연차 관련
= 김재완 - 직급 관련
= 이경환 - 당직 관련
= 김재우(팀장) - 사용자 관련 그리고 나머지 모든 것


```


= 사용자

== 사용자 전체보기(페이징)

size는 기본값 10 변경가능
page는 기본값 0 변경가능
text => EMAIL, POSITION , NAME , DEPARTMENT, ALL 만들어져 있고 더 추가하고 싶으면 메시지 보내주세요.
     위에 EMAIL, POSITION, NAME, DEPARTMENT는 keyword와 같이 와야하고 선택 안 하면 자동 ALL 선택
     ALL선택이 될 경우 어떤 keyword가 들어오든 무시함 => 애초에 전체보기이므로 키워드가 무의미

=== 요청
include::{snippets}/{member}/member_page_request/http-request.adoc[]

=== 응답
include::{snippets}/{member}/member_page_request/http-response.adoc[]


== 사용자 username 체크(성공시)
=== 요청
include::{snippets}/{member}/member_username_checking/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_username_checking/http-response.adoc[]




== 사용자 회원가입(성공시)
=== 요청
include::{snippets}/{member}/member_register/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_register/http-response.adoc[]


== 사용자 로그인(성공시)
=== 요청
include::{snippets}/{member}/member_login_success/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_login_success/http-response.adoc[]

== 로그인 에러들

```
토큰에 수정이 있을 경우/ 토큰 조작, 만료, 서명실패, 디코딩 실패시 같은 status이고, message만 다름
{
    "status": 403,
    "message": "Malformed Token",
    "data": false
}
```


```
토큰이 없거나 너무 짧은 경우
{
    "status": 401,
    "message": "Token is null or too short",
    "data": false
}

```




== RefreshToken 발급(성공시)


Refresh토큰을 받는 곳 /api/v1/refresh
위 에러와 같이 403 응답코드가 나오면 해당 주소로 요청을 보내면 된다. 그러면 새로은 AccessToken이 발급되고
만약 RefreshToken도 유효기간이 3일 남았다면, 재발급해준다.


=== 요청
include::{snippets}/{member}/member_refresh_token/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_refresh_token/http-response.adoc[]







== 사용자 정보 변환(성공시)
=== 요청
include::{snippets}/{member}/member_dto_modify/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_dto_modify/http-response.adoc[]

== 사용자 정보 변환(성공시) - 관리자가 강제로 변환
=== 요청
include::{snippets}/{member}/member_modify_admin/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_modify_admin/http-response.adoc[]



== 사용자 정보 자세히보기(성공시)

해당 토큰의 주인에 대한 정보를 응답함

=== 요청
include::{snippets}/{member}/member_detail_info/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_detail_info/http-response.adoc[]





== 사용자의 모든 정보수정하기 (관리자만 가능)
=== 요청
include::{snippets}/{member}/admin_member_modify_member/http-request.adoc[]
=== 응답
include::{snippets}/{member}/admin_member_modify_member/http-response.adoc[]



== 사용자의 권한 변경하기 (관리자만 가능)
=== 요청
include::{snippets}/{member}/member_role_change_admin/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_role_change_admin/http-response.adoc[]


== 사용자의 만일 관리자 권한이 필요한 곳에 일반 사용자가 접근할 경우
=== 데이터가 아니라 토큰으로 권한을 판별함
=== 요청
include::{snippets}/{member}/member_role_change_admin_failure/http-request.adoc[]
=== 응답
include::{snippets}/{member}/member_role_change_admin_failure/http-response.adoc[]


= 직급(Position) - 수정, 삭제, 저장은 관리자만 가능

== 직급 전체보기
=== 요청
include::{snippets}/{position}/position_find_all/http-request.adoc[]
=== 응답
include::{snippets}/{position}/position_find_all/http-response.adoc[]


== 직급 생성
=== 요청
include::{snippets}/{position}/position_save/http-request.adoc[]
=== 응답
include::{snippets}/{position}/position_save/http-response.adoc[]

== 직급 보기
=== 요청
include::{snippets}/{position}/position_detail/http-request.adoc[]
=== 응답
include::{snippets}/{position}/position_detail/http-response.adoc[]

== 직급 수정
=== 요청
include::{snippets}/{position}/position_modify/http-request.adoc[]
=== 응답
include::{snippets}/{position}/position_modify/http-response.adoc[]


== 직급 삭제
=== 요청
include::{snippets}/{position}/position_delete/http-request.adoc[]
=== 응답
include::{snippets}/{position}/position_delete/http-response.adoc[]


= 연차(vacation)

== 연차 생성
=== 요청
include::{snippets}/{vacation}/vacation_save/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_save/http-response.adoc[]

== 연차 자세히보기
=== 요청
include::{snippets}/{vacation}/vacation_detail/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_detail/http-response.adoc[]

== 연차 리스트보기
=== 요청
include::{snippets}/{vacation}/vacation_list/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_list/http-response.adoc[]

== 연차 수정하기
=== 요청
include::{snippets}/{vacation}/vacation_modify/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_modify/http-response.adoc[]


== 연차 삭제하기
=== 요청
include::{snippets}/{vacation}/vacation_delete/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_delete/http-response.adoc[]

== 연차 승인(승인 성공시 true) - 관리자권한
=== 요청
include::{snippets}/{vacation}/vacation_ok/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_ok/http-response.adoc[]

== 연차 반려(반려되면 true) - 관리자권한
=== 요청
include::{snippets}/{vacation}/vacation_rejected/http-request.adoc[]
=== 응답
include::{snippets}/{vacation}/vacation_rejected/http-response.adoc[]



= 당직(duty)

== 당직 저장
=== 요청
include::{snippets}/{duty}/duty_save/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_save/http-response.adoc[]


== 당직 단건 조회
=== 요청
include::{snippets}/{duty}/duty_detail/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_detail/http-response.adoc[]

== 당직 리스트 조회
=== 요청
include::{snippets}/{duty}/duty_list/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_list/http-response.adoc[]


== 당직 수정
=== 요청
include::{snippets}/{duty}/duty_modify/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_modify/http-response.adoc[]


== 당직 삭제
=== 요청
include::{snippets}/{duty}/duty_delete/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_delete/http-response.adoc[]

== 당직요청 승인(승인시 true) - 관리자권한
=== 요청
include::{snippets}/{duty}/duty_ok/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_ok/http-response.adoc[]

== 당직반려 승인(반려시 true) - 관리자권한만
=== 요청
include::{snippets}/{duty}/duty_rejected/http-request.adoc[]
=== 응답
include::{snippets}/{duty}/duty_rejected/http-response.adoc[]



